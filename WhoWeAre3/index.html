<!DOCTYPE html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>WHOWEARE â€“ ××©×ª×ª×¤×ª</title>
    <style>
      body { font-family: system-ui, Arial, sans-serif; max-width: 720px; margin: 24px auto; padding: 0 16px; }
      h1 { margin-bottom: 12px; }
      label { display: block; margin: 12px 0 6px; font-weight: 600; }
      input, button { font-size: 1rem; }
      input[type="text"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; }
      button { margin-top: 12px; padding: 10px 16px; border: 0; background: #8A2BE2; color: #fff; border-radius: 12px; cursor: pointer; }
      button:hover { background: #7a1fd1; }
      .card { background:#f8f8ff; border:1px solid #eee; border-radius:12px; padding:16px; margin-top:16px; }
    </style>
  </head>
  <body>
    <h1>ğŸ² WHOWEARE ğŸ²</h1>

    <!-- ×©×œ×‘ 1: ×”×¦×˜×¨×¤×•×ª -->
    <div id="joinSection" class="card">
      <label for="fullname">×©× ××œ×:</label>
      <input type="text" id="fullname" placeholder="×¨×©××• ×©× ××œ×" autocomplete="off" />
      <button id="joinBtn">×”×¦×˜×¨×¤×•×ª</button>
    </div>

    <!-- ×©×œ×‘ 2: ×©××œ×” ×•×ª×©×•×‘×” -->
    <div id="questionSection" class="card" style="display:none;">
      <h2 id="questionText" style="margin-top:0;"></h2>
      <input type="text" id="answer" placeholder="×”×§×œ×“/×™ ×ª×©×•×‘×”" autocomplete="off" />
      <button id="answerBtn">×©×œ×— ×ª×©×•×‘×”</button>
    </div>

    <!-- ×©×œ×‘ 3: ×ª×•×“×” -->
    <div id="thanksSection" class="card" style="display:none;">
      <h2 style="margin:0 0 8px">×ª×•×“×”! ×”×ª×©×•×‘×” × ×©××¨×” ğŸ‰</h2>
      <p style="margin:0">××¤×©×¨ ×œ×¡×’×•×¨ ××ª ×”×“×£ ××• ×œ×”××ª×™×Ÿ ×œ×”×•×¨××•×ª ×”×× ×—×”.</p>
    </div>

    <!-- Firebase + ×œ×•×’×™×§×” -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
      import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";

      // ×”×“×‘×™×§×™ ×›××Ÿ ××ª ×”×¢×¨×›×™× ××”×§×•× ×¡×•×œ ×©×œ×š (×›×•×œ×œ databaseURL!)
      const firebaseConfig = {
    apiKey: "AIzaSyDUz4oPw2kumoT9q7ONGLSGgcuYFlnc89o",
    authDomain: "who-we-are-dee11.firebaseapp.com",
    databaseURL: "https://who-we-are-dee11-default-rtdb.firebaseio.com",
    projectId: "who-we-are-dee11",
    storageBucket: "who-we-are-dee11.firebasestorage.app",
    messagingSenderId: "685866712511",
    appId: "1:685866712511:web:a41b29e6a69b8ac889350a"
  };

      const app = initializeApp(firebaseConfig);
      const rtdb = getDatabase(app);

      // ×××’×¨ ×©××œ×•×ª ×¤×©×•×˜ (×“×•×’×××•×ª)
      const questions = [
              "××™×–×” ×›×•×—Ö¾×¢×œ ×”×™×™×ª ×¨×•×¦×” ×©×™×”×™×” ×œ×š? ×œ××”?",
      "××™×–×• ×—×™×™×ª ×‘×¨ ×”×™×™×ª ×¨×•×¦×” ×œ×’×“×œ ×‘×‘×™×ª? ×œ××”?",
      "××” ×”×©×™×¨ ×©××ª/×” ×”×›×™ ××•×”×‘/×ª ×œ×©×™×¨ ×‘×§×•×œ ×¨×? ×œ××”?",
      "×× ×”×™×ª×” ×œ×š ××›×•× ×ª ×–××Ÿ, ×œ××™×–×• ×ª×§×•×¤×” ×”×™×™×ª × ×•×¡×¢/×ª? ×œ××”??",

      ];

      let currentPlayer = "";
      let currentQuestion = "";

      // ×”×¦×˜×¨×¤×•×ª
      document.getElementById("joinBtn").addEventListener("click", () => {
        const fullname = document.getElementById("fullname").value.trim();
        if (!fullname) { alert("× × ×œ×”×›× ×™×¡ ×©× ××œ×!"); return; }
        currentPlayer = fullname;

        // ×‘×•×—×¨×™× ×©××œ×” ×¨× ×“×•××œ×™×ª ×œ×©×—×§× ×™×ª
        const randomQuestion = questions[Math.floor(Math.random() * questions.length)];
        currentQuestion = randomQuestion;
        document.getElementById("questionText").textContent = randomQuestion;

        // ××¢×‘×¨ ×œ××¡×š ×”×©××œ×”
        document.getElementById("joinSection").style.display = "none";
        document.getElementById("questionSection").style.display = "block";
      });

      // ×©×œ×™×—×ª ×ª×©×•×‘×”
      document.getElementById("answerBtn").addEventListener("click", () => {
        const answer = document.getElementById("answer").value.trim();
        if (!answer) { alert("× × ×œ×”×›× ×™×¡ ×ª×©×•×‘×”!"); return; }

        const playersRef = ref(rtdb, "players");
        const newEntryRef = push(playersRef);
        set(newEntryRef, {
          name: currentPlayer,
          question: currentQuestion,
          answer: answer,
          answeredAt: new Date().toISOString()
        })
        .then(() => {
          // ××¢×‘×¨ ×œ××¡×š ×ª×•×“×”
          document.getElementById("questionSection").style.display = "none";
          const thanks = document.getElementById("thanksSection");
          if (thanks) thanks.style.display = "block";
        })
        .catch((error) => {
          console.error("×©×’×™××” ×‘×©××™×¨×”:", error);
          alert("×§×¨×ª×” ×ª×§×œ×”: " + error.message);
        });
      });
    </script>
  </body>
</html>
